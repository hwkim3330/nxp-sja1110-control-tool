# Gold Box μ •ν™•ν• ν¬νΈ λ§¤ν•‘ λ° FRER κµ¬μ„±

## β οΈ μ¤‘μ”: P3A, P3B, P5λ” SJA1110μ„ κ±°μΉμ§€ μ•μ!

### μ‹¤μ  ν•λ“μ›¨μ–΄ μ—°κ²° κµ¬μ΅°

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                     S32G274A                            β”‚
β”‚                                                         β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”      β”‚
β”‚  β”‚ GMAC0  β”‚  β”‚PFE_MAC0β”‚  β”‚PFE_MAC1β”‚  β”‚PFE_MAC2β”‚      β”‚
β”‚  β””β”€β”€β”€β”¬β”€β”€β”€β”€β”  β””β”€β”€β”€β”¬β”€β”€β”€β”€β”  β””β”€β”€β”€β”¬β”€β”€β”€β”€β”  β””β”€β”€β”€β”¬β”€β”€β”€β”€β”      β”‚
β”‚      β”‚           β”‚ SGMII      β”‚           β”‚            β”‚
β””β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
       β”‚           β”‚            β”‚           β”‚
       β”‚           β†“            β”‚           β”‚
       β”‚    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”        β”‚           β”‚
       β”‚    β”‚ SJA1110  β”‚        β”‚           β”‚
       β”‚    β”‚  Port 4  β”‚        β”‚           β”‚
       β”‚    β”‚          β”‚        β”‚           β”‚
       β”‚    β”‚ Port 2β†’P2A        β”‚           β”‚
       β”‚    β”‚ Port 3β†’P2B        β”‚           β”‚
       β”‚    β”‚ Port 1β†’P1         β”‚           β”‚
       β”‚    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”        β”‚           β”‚
       β”‚                        β”‚           β”‚
       β†“                        β†“           β†“
     [P3A]                    [P5]        [P3B]
   (μ§μ ‘μ—°κ²°)               (μ§μ ‘μ—°κ²°)   (μ§μ ‘μ—°κ²°)
```

## π“ μ¬λ°”λ¥Έ ν¬νΈ λ§¤ν•‘

### SJA1110 μ¤μ„μΉ ν¬νΈ (FRER κ°€λ¥)
| SJA1110 Port | λ¬Όλ¦¬ μ»¤λ„¥ν„° | μ„¤λ… | FRER μ§€μ› |
|--------------|------------|------|-----------|
| Port 0 | - | Reserved | β |
| Port 1 | P1/P4 | 100BASE-TX | β… |
| Port 2 | P2A | 1000BASE-T (AR8035 PHY) | β… |
| Port 3 | P2B | 1000BASE-T (AR8035 PHY) | β… |
| Port 4 | PFE_MAC0 | S32G λ‚΄λ¶€ SGMII | β… |
| Port 5 | P6 | 100BASE-T1 | β… |
| Port 6 | P7 | 100BASE-T1 | β… |
| Port 7 | P8 | 100BASE-T1 | β… |
| Port 8 | P9 | 100BASE-T1 | β… |
| Port 9 | P10 | 100BASE-T1 | β… |
| Port 10 | P11 | 100BASE-T1 | β… |

### S32G μ§μ ‘ μ—°κ²° (FRER λ¶κ°€λ¥)
| S32G μΈν„°νμ΄μ¤ | λ¬Όλ¦¬ μ»¤λ„¥ν„° | μ„¤λ… | FRER μ§€μ› |
|----------------|------------|------|-----------|
| GMAC0 | P3A | 1000BASE-T (KSZ9031 PHY) | β |
| PFE_MAC1 | P5 | 1000BASE-T | β |
| PFE_MAC2 | P3B | 1000BASE-T (KSZ9031 PHY) | β |

## π”„ μ¬λ°”λ¥Έ FRER λ³µμ  μ‹λ‚λ¦¬μ¤

### β… κ°€λ¥ν• μ‹λ‚λ¦¬μ¤

#### 1. PFE β†’ μ™Έλ¶€ μ΄μ¤‘ν™” (κ°€μ¥ μΌλ°μ )
```
μ…λ ¥: PFE_MAC0 (Port 4)
λ³µμ : Port 2 (P2A), Port 3 (P2B)
```
```python
# μ¬λ°”λ¥Έ κµ¬μ„±
add_stream(id=1, src_port=4, dst_ports=[2, 3])  # PFE β†’ P2A, P2B
```

#### 2. μ™Έλ¶€ β†’ λ‚΄λ¶€ μ΄μ¤‘ν™”
```
μ…λ ¥: P2A (Port 2)
λ³µμ : Port 4 (PFE), Port 5 (P6)
```
```python
# μ¬λ°”λ¥Έ κµ¬μ„±
add_stream(id=2, src_port=2, dst_ports=[4, 5])  # P2A β†’ PFE, P6
```

#### 3. P1 β†’ λ‹¤μ¤‘ ν¬νΈ
```
μ…λ ¥: P1 (Port 1)
λ³µμ : Port 2 (P2A), Port 3 (P2B), Port 5 (P6)
```
```python
# μ¬λ°”λ¥Έ κµ¬μ„±
add_stream(id=3, src_port=1, dst_ports=[2, 3, 5])  # P1 β†’ P2A, P2B, P6
```

### β λ¶κ°€λ¥ν• μ‹λ‚λ¦¬μ¤ (P3A, P3B, P5 κ΄€λ ¨)

```python
# μλ»λ κµ¬μ„± - P3Bλ” SJA1110μ„ κ±°μΉμ§€ μ•μ!
# add_stream(id=X, src_port='P3B', dst_ports=['P2A', 'P2B'])  # λ¶κ°€λ¥!

# μλ»λ κµ¬μ„± - P3Aλ” μ§μ ‘ μ—°κ²°
# add_stream(id=X, src_port='P3A', dst_ports=[...])  # λ¶κ°€λ¥!

# μλ»λ κµ¬μ„± - P5λ” μ§μ ‘ μ—°κ²°
# add_stream(id=X, src_port='P5', dst_ports=[...])  # λ¶κ°€λ¥!
```

## π― κ¶μ¥ ν…μ¤νΈ κµ¬μ„±

### ν…μ¤νΈ 1: κΈ°λ³Έ μ΄μ¤‘ν™”
```bash
./frer add-stream --stream-id 1 \
  --src-port 4 \
  --dst-ports 2 3 \
  --name "PFE_to_P2AB"
```

### ν…μ¤νΈ 2: T1 λΈλ¦¬μ§€
```bash
./frer add-stream --stream-id 2 \
  --src-port 2 \
  --dst-ports 5 6 7 \
  --name "P2A_to_T1"
```

### ν…μ¤νΈ 3: ν¬λ¦¬ν‹°μ»¬ 3μ¤‘ν™”
```bash
./frer add-stream --stream-id 3 \
  --src-port 1 \
  --dst-ports 2 3 5 \
  --name "P1_Critical"
```

## π“ ν¬νΈ λ²νΈ μ •λ¦¬

```python
# μ¬λ°”λ¥Έ ν¬νΈ λ²νΈ λ§¤ν•‘
PORT_MAP = {
    'PFE': 4,      # PFE_MAC0 (SGMII)
    'P1': 1,       # 100BASE-TX
    'P2A': 2,      # 1000BASE-T
    'P2B': 3,      # 1000BASE-T
    # 'P3A': X,    # μ‚¬μ© λ¶κ°€ (GMAC0 μ§μ ‘)
    # 'P3B': X,    # μ‚¬μ© λ¶κ°€ (PFE_MAC2 μ§μ ‘)
    # 'P5': X,     # μ‚¬μ© λ¶κ°€ (PFE_MAC1 μ§μ ‘)
    'P6': 5,       # 100BASE-T1
    'P7': 6,       # 100BASE-T1
    'P8': 7,       # 100BASE-T1
    'P9': 8,       # 100BASE-T1
    'P10': 9,      # 100BASE-T1
    'P11': 10      # 100BASE-T1
}
```

## π” κ²€μ¦ λ°©λ²•

### 1. ν¬νΈ μƒνƒ ν™•μΈ
```bash
# SJA1110 κ΄€λ¦¬ ν¬νΈλ§ ν™•μΈ
for i in 1 2 3 4 5 6 7 8 9 10; do
  echo "Port $i: $(cat /sys/class/net/sw0p$i/carrier 2>/dev/null)"
done

# P3A, P3B, P5λ” λ³„λ„ μΈν„°νμ΄μ¤
ip link show | grep -E "eth[0-9]|gmac|pfe"
```

### 2. FRER νΈλν”½ ν…μ¤νΈ
```bash
# PFEμ—μ„ νΈλν”½ μƒμ„±
ping -I pfe0 192.168.1.100

# P2A, P2Bμ—μ„ λ³µμ  ν™•μΈ
tcpdump -i eth0 -e -n  # P2A
tcpdump -i eth1 -e -n  # P2B
```

## β οΈ μ£Όμμ‚¬ν•­

1. **P3A, P3B, P5λ” FRER λ¶κ°€λ¥** - S32Gμ— μ§μ ‘ μ—°κ²°λμ–΄ SJA1110 μ¤μ„μΉλ¥Ό κ±°μΉμ§€ μ•μ
2. **PFE_MAC0 (Port 4)κ°€ μ£Όμ” μ…λ ¥** - S32G CPU νΈλν”½μ΄ μ—¬κΈ°λ΅ λ“¤μ–΄μ΄
3. **Port 2, 3μ΄ μ£Όμ” μ¶λ ¥** - P2A, P2Bλ΅ μ™Έλ¶€ λ„¤νΈμ›ν¬ μ—°κ²°
4. **Port 1μ€ 100Mbps μ ν•** - P1/P4λ” 100BASE-TX
5. **Port 5-10μ€ μλ™μ°¨μ©** - 100BASE-T1 automotive Ethernet

## π“ μ”μ•½

- β… **μ‚¬μ© κ°€λ¥**: Port 1-10 (P1, P2A, P2B, P6-P11, PFE_MAC0)
- β **μ‚¬μ© λ¶κ°€λ¥**: P3A, P3B, P5 (S32G μ§μ ‘ μ—°κ²°)
- π― **μ£Όμ” κ²½λ΅**: PFE_MAC0 (Port 4) β†’ P2A (Port 2), P2B (Port 3)